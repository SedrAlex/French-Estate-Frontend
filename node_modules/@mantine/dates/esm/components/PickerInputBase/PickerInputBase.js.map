{"version":3,"file":"PickerInputBase.js","sources":["../../../src/components/PickerInputBase/PickerInputBase.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport {\n  Input,\n  useInputProps,\n  InputSharedProps,\n  InputWrapperBaseProps,\n  DefaultProps,\n  Selectors,\n  Popover,\n  Modal,\n  InputStylesNames,\n  InputWrapperStylesNames,\n  PopoverProps,\n  ModalProps,\n  CloseButton,\n} from '@mantine/core';\nimport { useDisclosure } from '@mantine/hooks';\nimport { HiddenDatesInput, HiddenDatesInputValue } from '../HiddenDatesInput';\nimport { CalendarStylesNames } from '../Calendar';\nimport useStyles from './PickerInputBase.styles';\nimport { DatePickerType } from '../../types';\n\nexport type PickerInputBaseStylesNames =\n  | CalendarStylesNames\n  | InputStylesNames\n  | InputWrapperStylesNames\n  | Selectors<typeof useStyles>;\n\nexport interface DateInputSharedProps\n  extends DefaultProps<PickerInputBaseStylesNames>,\n    InputSharedProps,\n    InputWrapperBaseProps,\n    Omit<React.ComponentPropsWithRef<'button'>, 'defaultValue' | 'value' | 'onChange' | 'type'> {\n  /** Determines whether dropdown should be closed when date is selected, not applicable when type=\"multiple\", true by default */\n  closeOnChange?: boolean;\n\n  /** Type of dropdown, defaults to popover */\n  dropdownType?: 'popover' | 'modal';\n\n  /** Props added to Popover component */\n  popoverProps?: Partial<Omit<PopoverProps, 'children'>>;\n\n  /** Props added to Modal component */\n  modalProps?: Partial<Omit<ModalProps, 'children'>>;\n\n  /** Determines whether input value can be cleared, adds clear button to right section, false by default */\n  clearable?: boolean;\n\n  /** Props added to clear button */\n  clearButtonProps?: React.ComponentPropsWithoutRef<'button'>;\n\n  /** Determines whether the user can modify the value */\n  readOnly?: boolean;\n\n  /** Determines whether dates value should be sorted before onChange call, only applicable when type=\"multiple\", true by default */\n  sortDates?: boolean;\n\n  /** Separator between range value */\n  labelSeparator?: string;\n}\n\nexport interface PickerInputBaseProps extends DateInputSharedProps {\n  __staticSelector: string;\n  children: React.ReactNode;\n  formattedValue: string;\n  dropdownHandlers: ReturnType<typeof useDisclosure>[1];\n  dropdownOpened: boolean;\n  onClear(): void;\n  shouldClear: boolean;\n  value: HiddenDatesInputValue;\n  type: DatePickerType;\n}\n\nconst defaultProps: Partial<PickerInputBaseProps> = {};\n\nexport const PickerInputBase = forwardRef<HTMLButtonElement, PickerInputBaseProps>((props, ref) => {\n  const {\n    inputProps,\n    wrapperProps,\n    placeholder,\n    classNames,\n    styles,\n    unstyled,\n    popoverProps,\n    modalProps,\n    dropdownType,\n    children,\n    formattedValue,\n    dropdownHandlers,\n    dropdownOpened,\n    onClick,\n    clearable,\n    onClear,\n    clearButtonProps,\n    rightSection,\n    shouldClear,\n    readOnly,\n    disabled,\n    value,\n    name,\n    form,\n    type,\n    ...others\n  } = useInputProps('PickerInputBase', defaultProps, props);\n\n  const { classes, cx } = useStyles(null, {\n    name: inputProps.__staticSelector,\n    classNames,\n    styles,\n    unstyled,\n    variant: inputProps.variant,\n    size: inputProps.size,\n  });\n\n  const _rightSection =\n    rightSection ||\n    (clearable && shouldClear && !readOnly && !disabled ? (\n      <CloseButton\n        variant=\"transparent\"\n        onClick={onClear}\n        unstyled={unstyled}\n        size={inputProps.size}\n        {...clearButtonProps}\n      />\n    ) : null);\n\n  const handleClose = () => {\n    const isInvalidRangeValue = type === 'range' && value[0] && !value[1];\n    if (isInvalidRangeValue) {\n      onClear();\n    }\n\n    dropdownHandlers.close();\n  };\n\n  const hasLabel = wrapperProps.label;\n\n  return (\n    <>\n      {dropdownType === 'modal' && !readOnly && (\n        <Modal\n          opened={dropdownOpened}\n          onClose={handleClose}\n          withCloseButton={false}\n          size=\"auto\"\n          data-dates-modal\n          unstyled={unstyled}\n          {...modalProps}\n        >\n          {children}\n        </Modal>\n      )}\n\n      <Input.Wrapper {...wrapperProps}>\n        <Popover\n          position=\"bottom-start\"\n          opened={dropdownOpened}\n          onClose={handleClose}\n          disabled={dropdownType === 'modal' || readOnly}\n          trapFocus\n          returnFocus\n          unstyled={unstyled}\n          {...popoverProps}\n        >\n          <Popover.Target shouldOverrideDefaultTargetId={!hasLabel}>\n            <Input\n              aria-label={formattedValue}\n              data-dates-input\n              data-read-only={readOnly || undefined}\n              disabled={disabled}\n              component=\"button\"\n              type=\"button\"\n              multiline\n              onClick={(event) => {\n                onClick?.(event);\n                dropdownHandlers.toggle();\n              }}\n              rightSection={_rightSection}\n              {...inputProps}\n              ref={ref}\n              classNames={{ ...classNames, input: cx(classes.input, (classNames as any)?.input) }}\n              {...others}\n            >\n              {formattedValue || (\n                <Input.Placeholder\n                  className={classes.placeholder}\n                  sx={{ color: inputProps.error ? 'inherit' : undefined }}\n                >\n                  {placeholder}\n                </Input.Placeholder>\n              )}\n            </Input>\n          </Popover.Target>\n\n          <Popover.Dropdown data-dates-dropdown>{children}</Popover.Dropdown>\n        </Popover>\n      </Input.Wrapper>\n      <HiddenDatesInput value={value} name={name} form={form} type={type} />\n    </>\n  );\n});\n\nPickerInputBase.displayName = '@mantine/dates/PickerInputBase';\n"],"names":[],"mappings":";;;;;AAAA,IAAI,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC;AACtC,IAAI,UAAU,GAAG,MAAM,CAAC,gBAAgB,CAAC;AACzC,IAAI,iBAAiB,GAAG,MAAM,CAAC,yBAAyB,CAAC;AACzD,IAAI,mBAAmB,GAAG,MAAM,CAAC,qBAAqB,CAAC;AACvD,IAAI,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC;AACnD,IAAI,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC;AACzD,IAAI,eAAe,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,KAAK,GAAG,IAAI,GAAG,GAAG,SAAS,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;AAChK,IAAI,cAAc,GAAG,CAAC,CAAC,EAAE,CAAC,KAAK;AAC/B,EAAE,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;AAChC,IAAI,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC;AAClC,MAAM,eAAe,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AACxC,EAAE,IAAI,mBAAmB;AACzB,IAAI,KAAK,IAAI,IAAI,IAAI,mBAAmB,CAAC,CAAC,CAAC,EAAE;AAC7C,MAAM,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC;AACpC,QAAQ,eAAe,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AAC1C,KAAK;AACL,EAAE,OAAO,CAAC,CAAC;AACX,CAAC,CAAC;AACF,IAAI,aAAa,GAAG,CAAC,CAAC,EAAE,CAAC,KAAK,UAAU,CAAC,CAAC,EAAE,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;AAClE,IAAI,SAAS,GAAG,CAAC,MAAM,EAAE,OAAO,KAAK;AACrC,EAAE,IAAI,MAAM,GAAG,EAAE,CAAC;AAClB,EAAE,KAAK,IAAI,IAAI,IAAI,MAAM;AACzB,IAAI,IAAI,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;AACpE,MAAM,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AAClC,EAAE,IAAI,MAAM,IAAI,IAAI,IAAI,mBAAmB;AAC3C,IAAI,KAAK,IAAI,IAAI,IAAI,mBAAmB,CAAC,MAAM,CAAC,EAAE;AAClD,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC;AACtE,QAAQ,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AACpC,KAAK;AACL,EAAE,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC;AAWF,MAAM,YAAY,GAAG,EAAE,CAAC;AACZ,MAAC,eAAe,GAAG,UAAU,CAAC,CAAC,KAAK,EAAE,GAAG,KAAK;AAC1D,EAAE,MAAM,EAAE,GAAG,aAAa,CAAC,iBAAiB,EAAE,YAAY,EAAE,KAAK,CAAC,EAAE;AACpE,IAAI,UAAU;AACd,IAAI,YAAY;AAChB,IAAI,WAAW;AACf,IAAI,UAAU;AACd,IAAI,MAAM;AACV,IAAI,QAAQ;AACZ,IAAI,YAAY;AAChB,IAAI,UAAU;AACd,IAAI,YAAY;AAChB,IAAI,QAAQ;AACZ,IAAI,cAAc;AAClB,IAAI,gBAAgB;AACpB,IAAI,cAAc;AAClB,IAAI,OAAO;AACX,IAAI,SAAS;AACb,IAAI,OAAO;AACX,IAAI,gBAAgB;AACpB,IAAI,YAAY;AAChB,IAAI,WAAW;AACf,IAAI,QAAQ;AACZ,IAAI,QAAQ;AACZ,IAAI,KAAK;AACT,IAAI,IAAI;AACR,IAAI,IAAI;AACR,IAAI,IAAI;AACR,GAAG,GAAG,EAAE,EAAE,MAAM,GAAG,SAAS,CAAC,EAAE,EAAE;AACjC,IAAI,YAAY;AAChB,IAAI,cAAc;AAClB,IAAI,aAAa;AACjB,IAAI,YAAY;AAChB,IAAI,QAAQ;AACZ,IAAI,UAAU;AACd,IAAI,cAAc;AAClB,IAAI,YAAY;AAChB,IAAI,cAAc;AAClB,IAAI,UAAU;AACd,IAAI,gBAAgB;AACpB,IAAI,kBAAkB;AACtB,IAAI,gBAAgB;AACpB,IAAI,SAAS;AACb,IAAI,WAAW;AACf,IAAI,SAAS;AACb,IAAI,kBAAkB;AACtB,IAAI,cAAc;AAClB,IAAI,aAAa;AACjB,IAAI,UAAU;AACd,IAAI,UAAU;AACd,IAAI,OAAO;AACX,IAAI,MAAM;AACV,IAAI,MAAM;AACV,IAAI,MAAM;AACV,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,SAAS,CAAC,IAAI,EAAE;AAC1C,IAAI,IAAI,EAAE,UAAU,CAAC,gBAAgB;AACrC,IAAI,UAAU;AACd,IAAI,MAAM;AACV,IAAI,QAAQ;AACZ,IAAI,OAAO,EAAE,UAAU,CAAC,OAAO;AAC/B,IAAI,IAAI,EAAE,UAAU,CAAC,IAAI;AACzB,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,aAAa,GAAG,YAAY,KAAK,SAAS,IAAI,WAAW,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,mBAAmB,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,cAAc,CAAC;AAC9J,IAAI,OAAO,EAAE,aAAa;AAC1B,IAAI,OAAO,EAAE,OAAO;AACpB,IAAI,QAAQ;AACZ,IAAI,IAAI,EAAE,UAAU,CAAC,IAAI;AACzB,GAAG,EAAE,gBAAgB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;AAChC,EAAE,MAAM,WAAW,GAAG,MAAM;AAC5B,IAAI,MAAM,mBAAmB,GAAG,IAAI,KAAK,OAAO,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC1E,IAAI,IAAI,mBAAmB,EAAE;AAC7B,MAAM,OAAO,EAAE,CAAC;AAChB,KAAK;AACL,IAAI,gBAAgB,CAAC,KAAK,EAAE,CAAC;AAC7B,GAAG,CAAC;AACJ,EAAE,MAAM,QAAQ,GAAG,YAAY,CAAC,KAAK,CAAC;AACtC,EAAE,uBAAuB,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,YAAY,KAAK,OAAO,IAAI,CAAC,QAAQ,oBAAoB,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE,cAAc,CAAC;AACtK,IAAI,MAAM,EAAE,cAAc;AAC1B,IAAI,OAAO,EAAE,WAAW;AACxB,IAAI,eAAe,EAAE,KAAK;AAC1B,IAAI,IAAI,EAAE,MAAM;AAChB,IAAI,kBAAkB,EAAE,IAAI;AAC5B,IAAI,QAAQ;AACZ,GAAG,EAAE,UAAU,CAAC,EAAE,QAAQ,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,cAAc,CAAC,EAAE,EAAE,YAAY,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,OAAO,EAAE,cAAc,CAAC;AAC9K,IAAI,QAAQ,EAAE,cAAc;AAC5B,IAAI,MAAM,EAAE,cAAc;AAC1B,IAAI,OAAO,EAAE,WAAW;AACxB,IAAI,QAAQ,EAAE,YAAY,KAAK,OAAO,IAAI,QAAQ;AAClD,IAAI,SAAS,EAAE,IAAI;AACnB,IAAI,WAAW,EAAE,IAAI;AACrB,IAAI,QAAQ;AACZ,GAAG,EAAE,YAAY,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,EAAE;AACxE,IAAI,6BAA6B,EAAE,CAAC,QAAQ;AAC5C,GAAG,kBAAkB,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE,cAAc,CAAC,aAAa,CAAC,cAAc,CAAC;AAC5F,IAAI,YAAY,EAAE,cAAc;AAChC,IAAI,kBAAkB,EAAE,IAAI;AAC5B,IAAI,gBAAgB,EAAE,QAAQ,IAAI,KAAK,CAAC;AACxC,IAAI,QAAQ;AACZ,IAAI,SAAS,EAAE,QAAQ;AACvB,IAAI,IAAI,EAAE,QAAQ;AAClB,IAAI,SAAS,EAAE,IAAI;AACnB,IAAI,OAAO,EAAE,CAAC,KAAK,KAAK;AACxB,MAAM,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;AAChD,MAAM,gBAAgB,CAAC,MAAM,EAAE,CAAC;AAChC,KAAK;AACL,IAAI,YAAY,EAAE,aAAa;AAC/B,GAAG,EAAE,UAAU,CAAC,EAAE;AAClB,IAAI,GAAG;AACP,IAAI,UAAU,EAAE,aAAa,CAAC,cAAc,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,UAAU,CAAC,KAAK,CAAC,EAAE,CAAC;AAC3I,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,cAAc,oBAAoB,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE;AACxF,IAAI,SAAS,EAAE,OAAO,CAAC,WAAW;AAClC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,UAAU,CAAC,KAAK,GAAG,SAAS,GAAG,KAAK,CAAC,EAAE;AACxD,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,EAAE;AAC3E,IAAI,qBAAqB,EAAE,IAAI;AAC/B,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC,kBAAkB,KAAK,CAAC,aAAa,CAAC,gBAAgB,EAAE;AACxE,IAAI,KAAK;AACT,IAAI,IAAI;AACR,IAAI,IAAI;AACR,IAAI,IAAI;AACR,GAAG,CAAC,CAAC,CAAC;AACN,CAAC,EAAE;AACH,eAAe,CAAC,WAAW,GAAG,gCAAgC;;;;"}